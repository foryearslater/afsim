# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# **************************************************************
# This file defines the configuration of the autopilot,
# including its PIDs. A PID is a proportional, integral,
# and derivative feedback control technique. Multiple PIDs are
# used to 'define' the autopilot. Each control output may be
# influenced by one or more PIDs.
# **************************************************************

autopilot_config

  vertical_middle_loop_rate_factor  4
  vertical_outer_loop_rate_factor   4
  lateral_middle_loop_rate_factor   4
  lateral_outer_loop_rate_factor    4
  speed_middle_loop_rate_factor     200
  speed_outer_loop_rate_factor      4

  control_method                 BANK_TO_TURN_NO_YAW

  # ------------------------------------------------------------

  pid_group

    pid_alpha
      kp                         0.5
      ki                         0.007
      kd                         0.5
      max_error_accum            20
      low_pass_alpha             0.7
    end_pid_alpha

    pid_delta_pitch
      kp                         2
      ki                         0.5
      kd                         0.1
      max_error_accum            10
    end_pid_delta_pitch

    pid_vert_speed
      kp                         0.0012
      ki                         0
      kd                         0
      max_error_accum            60
      ignore_large_error_accum   500
    end_pid_vert_speed

    pid_pitch_angle
      kp                         0.7
      ki                         0
      kd                         0.1
      max_error_accum            0.5
    end_pid_pitch_angle

    pid_pitch_rate
      kp                         0
      ki                         3
      kd                         0.002
      max_error_accum            10
    end_pid_pitch_rate

    pid_flightpath_angle
      kp                         0.7
      ki                         0
      kd                         0.1
      max_error_accum            0.5
    end_pid_flightpath_angle

    pid_altitude
      kp                         10
      ki                         0
      kd                         0
      max_error_accum            100
    end_pid_altitude

    pid_beta
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_beta

    pid_yaw_rate
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_yaw_rate

    pid_yaw_heading
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_yaw_heading

    pid_taxi_heading
      kp                         1
      ki                         0.01
      kd                         0
      max_error_accum            10
    end_pid_taxi_heading

    pid_roll_rate
      kp                         0.08
      ki                         0.02
      kd                         0
      max_error_accum            20
    end_pid_roll_rate

    pid_delta_roll
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_delta_roll

    pid_bank_angle
      kp                         0.5
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_bank_angle

    pid_roll_heading
      kp                         3
      ki                         0
      kd                         0
      max_error_accum            2
      low_pass_alpha             0.5
    end_pid_roll_heading

    pid_forward_accel
      kp                         20
      ki                         2
      kd                         0
      max_error_accum            1
    end_pid_forward_accel

    pid_speed
      kp                         0.3
      ki                         0.05
      kd                         0.5
      max_error_accum            10
    end_pid_speed

    pid_taxi_forward_accel
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_taxi_forward_accel

    pid_taxi_speed
      kp                         1
      ki                         0
      kd                         0
      max_error_accum            1
    end_pid_taxi_speed

    pid_taxi_yaw_rate
      kp                         0.1
      ki                         0.2
      kd                         0
      max_error_accum            10
    end_pid_taxi_yaw_rate

    # .............................

    limits_and_settings
      afterburner_threshold      1
      speedbrake_threshold       0
      pitch_gload_min            -1
      pitch_gload_max            8
      alpha_min                  -8
      alpha_max                  12
      pitch_rate_min             -10
      pitch_rate_max             40
      vert_speed_min             -15000
      vert_speed_max             15000
      yaw_gload_max              0.4
      beta_max                   10
      yaw_rate_max               5
      roll_rate_max              30
      bank_angle_max             60
      forward_accel_min          -1
      forward_accel_max          2
      taxi_speed_max_fps         10
      taxi_yaw_rate_max          10
    end_limits_and_settings

  end_pid_group

  # ------------------------------------------------------------

end_autopilot_config
