
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Processors &#8212; AFSIM 2.9.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/wsftheme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/collapse.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/admonition.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-header.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-topic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/quick-search.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/collapse_sections.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Behaviors and Behavior Trees" href="p2-6_primer_behavior_btree.html" />
    <link rel="prev" title="Tracks" href="p2-4_primer_tracks.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="p2-6_primer_behavior_btree.html" title="Behaviors and Behavior Trees"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="p2-4_primer_tracks.html" title="Tracks"
             accesskey="P">previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="processors">
<h1>Processors<a class="headerlink" href="#processors" title="Permalink to this headline">¶</a></h1>
<p>A <strong>processor</strong> provides the ability to define behaviors for a given platform.</p>
<p>Most processors are defined by the user using the AFSIM scripting language.</p>
<p>The following list includes some predefined processor types:</p>
<table class="hlist"><tr><td><ul class="simple">
<li><p>WSF_DIRECTION_FINDER_PROCESSOR</p></li>
<li><p>WSF_TRACK_PROCESSOR</p></li>
</ul>
</td><td><ul class="simple">
<li><p>WSF_MESSAGE_PROCESSOR</p></li>
<li><p>WSF_GUIDANCE_COMPUTER</p></li>
</ul>
</td><td><ul class="simple">
<li><p>WSF_IMAGE_PROCESSOR</p></li>
</ul>
</td><td><ul class="simple">
<li><p>WSF_TASK_PROCESSOR</p></li>
</ul>
</td></tr></table>
<p>A number of built-in processors are available - each serving a unique function. This guide will demonstrate the implementation of a commonly used model, the <cite>WSF_TRACK_PROCESSOR</cite>.</p>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>A track processor’s primary responsibility is to implement a processor interface for a track_manager. It is responsible for three major functions:</p>
<ol class="arabic simple">
<li><p>Accept reports (tracks) from local and off-board sources</p></li>
<li><p>Feed reports (tracks) to a track manager for correlation and fusion</p></li>
<li><p>Send updated tracks to interested parties.</p></li>
</ol>
<p>To implement a track processor, include the following code snippet in a platform or platform type definition in the scenario:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processor</span> <span class="n">track_proc</span> <span class="n">WSF_TRACK_PROCESSOR</span>
   <span class="n">master_track_processor</span>
   <span class="n">purge_interval</span> <span class="mi">10</span> <span class="n">sec</span>
   <span class="n">report_interval</span> <span class="mi">3</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
<p>To receive tracks from sensors, the connected sensors must include the following code line in the desired sensor definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">internal_link</span> <span class="n">track_proc</span>
</pre></div>
</div>
<p>Tracks may also be passed to other platforms through communications and the <cite>external_link</cite> command. Additionally, action may be taken
by an internal task processor that implements behaviors. Behaviors and Communications are discussed in upcoming modules. Before behaviors can be utilized,
a task processor must be defined. Define a task processor (task manager) with the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processor</span> <span class="n">TASK_MANAGER</span> <span class="n">WSF_TASK_PROCESSOR</span>
   <span class="n">update_interval</span> <span class="mi">10</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
<p>Then add an instance of this processor to the desired platform or platform type definition with the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span> <span class="n">processor</span> <span class="n">task_mgr</span> <span class="n">TASK_MANAGER</span>
<span class="n">end_processor</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will result in the owning platform making decisions and taking action if <cite>TASK_MANAGER</cite> implements a behavior tree.
Behaviors and Behavior Trees are discussed in upcoming modules.</p>
</div>
</section>
<section id="closer-look">
<h2>Closer Look<a class="headerlink" href="#closer-look" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following steps assume that the “simple_flight” scenario is present as discussed in <a class="reference internal" href="p2-4_primer_tracks.html"><span class="doc">Tracks</span></a>.</p>
</div>
<section id="adding-a-track-processor">
<h3>Adding a Track Processor<a class="headerlink" href="#adding-a-track-processor" title="Permalink to this headline">¶</a></h3>
<p>In order to do anything with the sensor track created by the <cite>AIR_RADAR</cite>, a track processor must be added to the platform type definition of <cite>CARGO_AIRCRAFT</cite>:</p>
<ol class="arabic">
<li><p>Open the <em>simple_flight</em> project or scenario in Wizard.</p></li>
<li><p>Create a new text file, in the <em>simple_flight</em> directory and name it, <em>track_processor.txt</em>.</p></li>
<li><p>Open <em>cargo_aircraft.txt</em> and add the following code at the beginning of the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include_once</span> <span class="n">track_processor</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</li>
<li><p>Open <em>track_processor.txt</em> and add the following track processor command block / definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processor</span> <span class="n">TRACK_MANAGER</span> <span class="n">WSF_TRACK_PROCESSOR</span>
   <span class="n">master_track_processor</span>
   <span class="n">purge_interval</span> <span class="mi">10</span> <span class="n">sec</span>
   <span class="n">report_interval</span> <span class="mi">3</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
</li>
<li><p>Return to <em>cargo_aircraft.txt</em> and add the following code within the <cite>CARGO_AIRCRAFT</cite> platform type definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span> <span class="n">processor</span> <span class="n">track_proc</span> <span class="n">TRACK_MANAGER</span>
   <span class="n">purge_interval</span> <span class="mi">15</span> <span class="n">sec</span>
   <span class="n">report_interval</span> <span class="mf">2.5</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If a value is defined already on an externally defined platform part, as is shown in the example above, values may be overwritten. The override will apply only to the
platform or platforms of the platform type that have the overwritten implementation.</p>
</div>
</li>
<li><p>Finally link the <cite>cargo_radar</cite> track report to the <cite>track_proc</cite> by adding the following code line to the radar definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">internal_link</span> <span class="n">track_proc</span>
</pre></div>
</div>
</li>
<li><p>Having made these additions, simulate the <em>simple_flight</em> scenario in Warlock.</p></li>
<li><p>Advance the simulation to a time just prior to the aircraft entering each other’s sensor range (~15 min).</p></li>
<li><p>In Warlock’s Visibility widget, hide one of the teams, and select the aircraft of the visible team.</p></li>
<li><p>Wait until the hidden platform enters the sensor range of the selected platform.</p></li>
<li><p>Notice that a track appears, visible only while the platform remains selected. This is a result of the newly added track_manager. The expected view is provided below:</p>
<img alt="../../_images/simple_flight_with_track_proc.png" class="align-center" src="../../_images/simple_flight_with_track_proc.png" />
</li>
</ol>
<p>The opposing view similarly shows an incoming blue track when the green aircraft is selected.</p>
<p>Now that the tracks are available for processing, and the aircraft are aware of one another, they must resolve the conflict by taking action. This requires the use
of an additional processor, the <cite>WSF_TASK_PROCESSOR</cite>, and the implementation of behaviors. Behaviors and Behavior Trees are discussed in an upcoming module.</p>
</section>
<section id="adding-a-task-processor">
<h3>Adding a Task Processor<a class="headerlink" href="#adding-a-task-processor" title="Permalink to this headline">¶</a></h3>
<p>The task processor will enable “cargo-1” and “cargo-2” the ability to make decisions in order to avoid a collision by implementing behaviors. For this module, the processor
will be implemented so that it is available for use in upcoming modules.</p>
<p>Complete the following steps to implement a task processor:</p>
<ol class="arabic">
<li><p>Add the following processor command block to <em>track_processor.txt</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processor</span> <span class="n">CARGO_TASK_MANAGER</span> <span class="n">WSF_TASK_PROCESSOR</span>
   <span class="n">update_interval</span> <span class="mi">10</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
</li>
<li><p>Add the following processor implementation block to the platform type definition of <cite>CARGO_AIRCRAFT</cite> in <em>cargo_aircraft.txt</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span> <span class="n">processor</span> <span class="n">task_mgr</span> <span class="n">CARGO_TASK_MANAGER</span>
<span class="n">end_processor</span>
</pre></div>
</div>
</li>
</ol>
<p>This skeleton processor is now ready to implement a behavior tree.</p>
</section>
</section>
<section id="review">
<h2>Review<a class="headerlink" href="#review" title="Permalink to this headline">¶</a></h2>
<p>After completing this module, the <em>simple_flight</em> project should include all previous files and a new file, <em>track_processor.txt</em>. Additions/modifications
were made to <em>cargo_aircraft.txt</em>. Changes reflect the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>track_processor.txt</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># track_processor.txt</span>
<span class="c1"># A component of the simple_flight demo</span>

<span class="n">processor</span> <span class="n">TRACK_MANAGER</span> <span class="n">WSF_TRACK_PROCESSOR</span>
   <span class="n">master_track_processor</span>
   <span class="n">purge_interval</span> <span class="mi">10</span> <span class="n">sec</span>
   <span class="n">report_interval</span> <span class="mi">3</span> <span class="n">sec</span>
<span class="n">end_processor</span>

<span class="n">processor</span> <span class="n">CARGO_TASK_MANAGER</span> <span class="n">WSF_TASK_PROCESSOR</span>
   <span class="n">update_interval</span> <span class="mi">10</span> <span class="n">sec</span>
<span class="n">end_processor</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>cargo_aircraft.txt</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cargo_aircraft.txt</span>
<span class="c1"># A component of the simple_flight demo</span>

<span class="n">include_once</span> <span class="n">track_processor</span><span class="o">.</span><span class="n">txt</span>

<span class="n">radar_signature</span> <span class="n">CARGO_AIRCRAFT_RADAR_SIG</span>
   <span class="n">constant</span> <span class="mi">10</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
<span class="n">end_radar_signature</span>

<span class="n">sensor</span> <span class="n">AIR_RADAR</span> <span class="n">WSF_GEOMETRIC_SENSOR</span>
   <span class="n">frame_time</span> <span class="mi">5</span> <span class="n">sec</span>
   <span class="n">maximum_range</span> <span class="mi">30</span> <span class="n">nm</span>

   <span class="n">reports_location</span>
   <span class="n">reports_bearing</span>
   <span class="n">reports_side</span>
   <span class="n">reports_velocity</span>

   <span class="n">azimuth_field_of_view</span>   <span class="o">-</span><span class="mf">45.0</span> <span class="n">deg</span>  <span class="mf">45.0</span> <span class="n">deg</span>
   <span class="n">elevation_field_of_view</span> <span class="o">-</span><span class="mf">15.0</span> <span class="n">deg</span>  <span class="mf">15.0</span> <span class="n">deg</span>

   <span class="n">ignore_same_side</span>
   <span class="n">on</span>
<span class="n">end_sensor</span>

<span class="n">platform_type</span> <span class="n">CARGO_AIRCRAFT</span> <span class="n">WSF_PLATFORM</span>
   <span class="n">icon</span> <span class="n">c130</span>
   <span class="n">spatial_domain</span> <span class="n">air</span>
   <span class="n">category</span> <span class="n">cargo</span>

   <span class="n">mover</span> <span class="n">WSF_AIR_MOVER</span>
      <span class="n">update_interval</span> <span class="mi">3</span> <span class="n">sec</span>
   <span class="n">end_mover</span>

   <span class="n">radar_signature</span> <span class="n">CARGO_AIRCRAFT_RADAR_SIG</span>

   <span class="n">add</span> <span class="n">sensor</span> <span class="n">cargo_radar</span> <span class="n">AIR_RADAR</span>
     <span class="n">internal_link</span> <span class="n">track_proc</span>
   <span class="n">end_sensor</span>

   <span class="n">add</span> <span class="n">processor</span> <span class="n">track_proc</span> <span class="n">TRACK_MANAGER</span>
   <span class="n">end_processor</span>

  <span class="n">add</span> <span class="n">processor</span> <span class="n">task_mgr</span> <span class="n">CARGO_TASK_MANAGER</span>
  <span class="n">end_processor</span>
<span class="n">end_platform_type</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Tracks may be used by processors to determine decisions through behaviors and behavior trees. Processors primarily act on tracks, serving different purposes depending on the
nature of the processor. Tracks may be passed between platform parts of a given platform through the use of the <cite>internal_link</cite> command. More advanced track processing
and decision making may be achieved through implementation of Communications.</p>
</section>
<section id="related-topics">
<h2>Related Topics<a class="headerlink" href="#related-topics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="p1-1_primer_wizard.html"><span class="doc">Wizard</span></a></p>
<p><a class="reference internal" href="p2-4_primer_tracks.html"><span class="doc">Tracks</span></a></p>
<p><a class="reference internal" href="p2-6_primer_behavior_btree.html"><span class="doc">Behaviors and Behavior Trees</span></a></p>
</div></blockquote>
</section>
</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    <p class="logo"><a href="../main_page.html">
      <img class="logo" src="../../_static/sidebar_logo.png" alt="Logo"/>
    </a></p>
  

<script src="../../_static/extension.js"></script>
<p>
   <ul class="Core-menu">
      <li><a href="../main_page.html">Main Page</a></li>
      <li><a href="../changelog/afsim_2.9.html">Changelog</a> | <a href="../afsim_change_log.html">History</a></li>
      <li><a href="../documents.html">Documents</a></li>
      <li><a href="../security_info.html">Security Information</a></li>
      <li><a href="../contact_info.html">Contact Information</a></li>
   </ul>
</p>

<br>
<hr>
<br>

<p>
   <h3>Core Apps</h3>
   <ul class="Core-menu">
     <li><a href="../wsf_core.html">Main Page</a></li>
     <li><a href="../wsf_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wsf_2.9.html">Changelog</a> | <a href="../wsf_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Demos</h3>
   <ul class="DEMOS-menu">
     <li><a href="../changelog/demos_2.9.html">Changelog</a> | <a href="../demos_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Mystic</h3>
   <ul class="Mystic-menu">
     <li><a href="../mystic.html">Main Page</a></li>
     <li><a href="../mystic_users_guide.html">User's Guide</a></li>
     <li><a href="../mystic_reference_guide.html">Reference Guide</a></li>
     <li><a href="../pymystic.html">Batch Processing</a></li>
     <li><a href="../changelog/mystic_2.9.html">Changelog</a> | <a href="../mystic_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Warlock</h3>
   <ul class="WARLOCK-menu">
     <li><a href="../warlock.html">Main Page</a></li>
     <li><a href="../warlock_users_guide.html">User's Guide</a></li>
     <li><a href="../warlock_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/warlock_2.9.html">Changelog</a> | <a href="../warlock_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Wizard</h3>
   <ul class="WIZARD-menu">
     <li><a href="../wizard.html">Main Page</a></li>
     <li><a href="../wizard_users_guide.html">User's Guide</a></li>
     <li><a href="../wizard_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wizard_2.9.html">Changelog</a> | <a href="../wizard_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>EVT Reader</h3>
   <ul class="EvtReader-menu">
     <li><a href="../evtreader.html">Main Page</a></li>
   </ul>
</p>

<p>
   <h3>Mover Creator</h3>
   <ul class="MoverCreator-menu">
     <li><a href="../mover_creator.html">Main Page</a></li>
     <li><a href="../mc_users_guide.html">User's Guide</a></li>
     <li><a href="../mc_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/mover_creator_2.9.html">Changelog</a> | <a href="../mc_change_log.html">History</a></li>
   </ul>
</p>

<br>
<hr>
<br>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/docs/user_manual/p2-5_primer_processors.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="p2-6_primer_behavior_btree.html" title="Behaviors and Behavior Trees"
             >next</a> |</li>
        <li class="right" >
          <a href="p2-4_primer_tracks.html" title="Tracks"
             >previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Multiple, All Rights Reserved.
      Last updated on Feb 25, 2022.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>