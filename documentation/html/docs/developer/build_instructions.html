
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Build Instructions &#8212; AFSIM 2.9.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/wsftheme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/collapse.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/admonition.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-header.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-topic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/quick-search.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/collapse_sections.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Coding Standards" href="coding_standards.html" />
    <link rel="prev" title="AFSIM Sphinx Extensions" href="afsim_sphinx_extensions.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="coding_standards.html" title="Coding Standards"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="afsim_sphinx_extensions.html" title="AFSIM Sphinx Extensions"
             accesskey="P">previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="build-instructions">
<h1>Build Instructions<a class="headerlink" href="#build-instructions" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id9">Overview</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id10">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#obtaining-software" id="id11">Obtaining Software</a></p>
<ul>
<li><p><a class="reference internal" href="#installing-afsim-and-the-afsim-source-code-from-a-distribution" id="id12">Installing AFSIM and the AFSIM Source Code from a Distribution</a></p></li>
<li><p><a class="reference internal" href="#downloading-the-afsim-source-from-a-remote-repository" id="id13">Downloading the AFSIM Source from a Remote Repository</a></p></li>
<li><p><a class="reference internal" href="#cloning-afsim-source-from-a-remote-repository" id="id14">Cloning AFSIM Source from a Remote Repository</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#build-environment" id="id15">Build Environment</a></p>
<ul>
<li><p><a class="reference internal" href="#directory-structure" id="id16">Directory Structure</a></p>
<ul>
<li><p><a class="reference internal" href="#including-3rd-party-libraries-and-resources" id="id17">Including 3rd Party Libraries and Resources</a></p></li>
<li><p><a class="reference internal" href="#including-extensions-and-plug-ins" id="id18">Including Extensions and Plug-ins</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#generating-a-buildsystem" id="id19">Generating a Buildsystem</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake-command-line" id="id20">CMake Command Line</a></p></li>
<li><p><a class="reference internal" href="#cmake-gui" id="id21">CMake GUI</a></p></li>
<li><p><a class="reference internal" href="#cmake-options" id="id22">CMake Options</a></p></li>
<li><p><a class="reference internal" href="#configuring-3rd-party-libraries-and-resources" id="id23">Configuring 3rd party libraries and resources</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-standard-afsim-applications" id="id24">Building the Standard AFSIM applications</a></p>
<ul>
<li><p><a class="reference internal" href="#windows" id="id25">Windows</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake-targets" id="id26">CMake Targets</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#linux" id="id27">Linux</a></p>
<ul>
<li><p><a class="reference internal" href="#make-targets" id="id28">Make Targets</a></p></li>
<li><p><a class="reference internal" href="#make-options" id="id29">Make Options</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-install-target" id="id30">Building the Install Target</a></p></li>
<li><p><a class="reference internal" href="#building-the-documentation-target" id="id31">Building the Documentation Target</a></p></li>
<li><p><a class="reference internal" href="#running-the-system-tests" id="id32">Running the System Tests</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id33">Windows</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id34">Linux</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-the-regression-tests" id="id35">Running the Regression Tests</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id36">Windows</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id37">Linux</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id9">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This document describes how to build the AFSIM baseline applications, how directories may be structured, and how extensions and plug-ins may be included in the build.
It is intended for software developers and end-users needing to compile AFSIM.</p>
</section>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id10">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The following Operating Systems and Compilers are supported.</p>
<table class="colwidths-auto header-text-left class align-top docutils align-default" id="id7">
<caption><span class="caption-text"><strong>Operating System and Compiler</strong></span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operating System</p></th>
<th class="head"><p>Compiler</p></th>
<th class="head"><p>Version(s)</p></th>
<th class="head"><p>Architecture</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Windows 10</p></td>
<td><p><a class="reference external" href="https://www.visualstudio.com/">Microsoft Visual Studio</a></p></td>
<td><p>2015, 2017, or 2019</p></td>
<td><p>64-bit</p></td>
</tr>
<tr class="row-odd"><td><p>Linux</p></td>
<td><p><a class="reference external" href="https://gcc.gnu.org/">GCC</a></p></td>
<td><p>4.8.5</p></td>
<td><p>64-bit</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The term <em>supported</em> infers AFSIM, as distributed, has been tested against these configurations. While AFSIM successfully compiles and runs in many configurations, only the listed configurations are fully tested by the development team.</p>
</div>
<table class="colwidths-auto header-text-left docutils align-default" id="id8">
<caption><span class="caption-text"><strong>Additional Tools</strong></span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Tool</p></th>
<th class="head"><p>Version(s)</p></th>
<th class="head"><p>Required to</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://cmake.org/">CMake</a></p></td>
<td><p>3.7 or higher</p></td>
<td><p>Generate build system</p></td>
<td><p>For Visual Studio 2019, CMake 3.14 or higher is required.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://www.python.org/">Python</a></p></td>
<td><p>3.x.x</p></td>
<td><p>Run automated tests and build Sphinx documentation</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a></p></td>
<td><p>2.1.x or higher</p></td>
<td><p>Build Sphinx documentation</p></td>
<td><p>Requires MikTex on Windows and additional latex and image packages on Linux</p>
<p>Sphinx 2.4.x or later is required to build LaTeX/PDF documentation</p>
</td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/">myst-parser</a></p></td>
<td><p>0.14.x or higher</p></td>
<td><p>Markdown support for Sphinx documentation</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://miktex.org/">MikTex</a></p></td>
<td><p>2.9 or higher</p></td>
<td><p>Build Sphinx documentation</p></td>
<td><p>Windows only</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://www.perl.org/get.html">Perl</a></p></td>
<td><p>5.16.3</p></td>
<td><p>Build Sphinx documentation (LaTex/PDF)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://www.doxygen.org/">Doxygen</a></p></td>
<td><p>1.8.5 or higher</p></td>
<td><p>Build Doxygen documentation</p></td>
<td><p>Requires Graphviz to be installed</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://www.graphviz.org/">Graphviz</a></p></td>
<td><p>2.38 or higher</p></td>
<td><p>Build Doxygen documentation</p></td>
<td><p>Requires Doxygen to be installed</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/google/googletest">Gtest</a></p></td>
<td><p>1.10.0</p></td>
<td><p>Run Unit Tests</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://gcc.gnu.org/fortran/">GFortran</a></p></td>
<td><p>Windows: 8.1.0</p>
<p>Linux: 4.8.5</p>
</td>
<td><p>Build classified release</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>MESA Graphics Libraries</p></td>
<td><p>Latest</p></td>
<td><p>Build Graphical Applications</p></td>
<td><p>Debian: libglu1-mesa-dev and libgl1-mesa-dev</p>
<p>RHEL: mesa-libGLU-devel and mesa-libGL-devel</p>
</td>
</tr>
<tr class="row-odd"><td><p>Linux JPEG Libraries</p></td>
<td><p>Latest</p></td>
<td><p>Build Graphical Applications</p></td>
<td><p>Debian: libjpeg62 and libjpeg62-dev</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Verify User and System Environment Variables are correct, including <em>PATH</em> settings, to avoid tool execution issues.</p>
</div>
</section>
<section id="obtaining-software">
<h2><a class="toc-backref" href="#id11">Obtaining Software</a><a class="headerlink" href="#obtaining-software" title="Permalink to this headline">¶</a></h2>
<p>AFSIM source and application files may be obtained using the following methods:</p>
<ol class="arabic simple">
<li><p>Install AFSIM source and application files from an official distribution.</p></li>
<li><p>Download AFSIM source files from the official AFSIM repository.</p></li>
<li><p>Clone AFSIM source from the official AFSIM repository.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>AFSIM software obtained from distribution files will include compiled AFSIM application executables in the release, such as Mission, Warlock, etc. Cloned repositories require a subsequent build to generate the target AFSIM applications.</p>
</div>
<section id="installing-afsim-and-the-afsim-source-code-from-a-distribution">
<h3><a class="toc-backref" href="#id12">Installing AFSIM and the AFSIM Source Code from a Distribution</a><a class="headerlink" href="#installing-afsim-and-the-afsim-source-code-from-a-distribution" title="Permalink to this headline">¶</a></h3>
<p>The AFSIM Release Software may be obtained from the AFSIM Portal on <a class="reference external" href="https://confluence.di2e.net/x/mBqHG">Confluence</a> by navigating to  the desired release and downloading the release package (zip, msi, tar.gz, deb, rpm).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When a distribution package is extracted, a folder is created in the destination path specified for extraction (e.g. <em>afsim-x.y.z-win64</em>).  This folder may be renamed to a user specific convention and moved to the desired location prior to performing builds.</p>
</div>
<p>See the AFSIM <a class="reference internal" href="../user/installation_instructions.html"><span class="doc">Install Instructions</span></a> for additional information on obtaining AFSIM from a distribution.</p>
<p>The following is an example of the directory structure when installing AFSIM from a distribution file.</p>
<blockquote>
<div><pre class="literal-block">path/to/afsim/distribution
           |__ bin
           |__ demos
           |__ documentation
           |__ resources
           |__ swdev
           |  |__ src
           |      .
           |      .
           |      CMakeLists.txt
           |      .
           |      .
           |__ tools
           |__ training</pre>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>swdev</em> directory contains the AFSIM source code when installing from a distribution file.  The <em>bin</em> directory contains the AFSIM application executables and libraries.</p>
</div>
</section>
<section id="downloading-the-afsim-source-from-a-remote-repository">
<h3><a class="toc-backref" href="#id13">Downloading the AFSIM Source from a Remote Repository</a><a class="headerlink" href="#downloading-the-afsim-source-from-a-remote-repository" title="Permalink to this headline">¶</a></h3>
<p>The AFSIM source for Windows and Linux may be downloaded from the <em>afsim</em> repository on <a class="reference external" href="https://bitbucket.di2e.net/projects/AFSIM/repos/afsim">Bitbucket</a> by selecting the ellipsis icon and the <em>Download</em> option from the drop-down menu as shown below:</p>
<a class="reference internal image-reference" href="../../_images/DI2E_download.png"><img alt="../../_images/DI2E_download.png" class="align-center" src="../../_images/DI2E_download.png" style="width: 465.75px; height: 328.5px;" /></a>
<p>Once the download is complete, the <em>.zip</em> file may be extracted in the root directory by right clicking the zip file and selecting the root directory as the destination.  An example of the resulting directory structure is shown below:</p>
<blockquote>
<div><pre class="literal-block">path/to/afsim
           |__ .gitlab
           |__ cmake
           |__ core
           |__ doc
           |__ mission
           |   .
           |   .
           CMakeLists.txt
           LICENSE.md
           README.md
           .
           .</pre>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Linux and Windows directory structures are the same.</p>
</div>
</section>
<section id="cloning-afsim-source-from-a-remote-repository">
<h3><a class="toc-backref" href="#id14">Cloning AFSIM Source from a Remote Repository</a><a class="headerlink" href="#cloning-afsim-source-from-a-remote-repository" title="Permalink to this headline">¶</a></h3>
<p>AFSIM remote repositories may be cloned in both Windows and Linux using the “<strong>git clone</strong>” command, passing the URL of the remote repository, and optionally the desired name of the local repository.</p>
<p>The AFSIM project address for cloning may be found on the <em>afsim</em> repository on <a class="reference external" href="https://bitbucket.di2e.net/projects/AFSIM/repos/afsim">Bitbucket</a> by selecting <em>Clone</em> from the ACTIONS menu and copying the highlighted text in the pop-up window as shown below:</p>
<a class="reference internal image-reference" href="../../_images/DI2E_clone.png"><img alt="../../_images/DI2E_clone.png" class="align-center" src="../../_images/DI2E_clone.png" style="width: 486.75px; height: 352.5px;" /></a>
<p>The following <em>git clone</em> command example (Windows), will create the <em>afsim</em> sub-directory, and clone the <em>afsim</em> remote repository within:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://bitbucket.di2e.net/scm/afsim/afsim.git</span> <span class="pre">afsim</span></code></p>
</div></blockquote>
<p>An example of the resulting directory structure is shown below:</p>
<blockquote>
<div><pre class="literal-block">path/to/afsim
           |__ .gitlab
           |__ cmake
           |__ core
           |__ doc
           |__ mission
           |   .
           |   .
           CMakeLists.txt
           LICENSE.md
           README.md
           .
           .</pre>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Other AFSIM <em>repos</em> such as demos, tools, and training, may be cloned from Bitbucket in a similar manner.  These repos may be found here: <a class="reference external" href="https://bitbucket.di2e.net/projects/AFSIM">https://bitbucket.di2e.net/projects/AFSIM</a>.</p>
</div>
</section>
</section>
<section id="build-environment">
<h2><a class="toc-backref" href="#id15">Build Environment</a><a class="headerlink" href="#build-environment" title="Permalink to this headline">¶</a></h2>
<section id="directory-structure">
<h3><a class="toc-backref" href="#id16">Directory Structure</a><a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<p>To maintain a clean source tree, <em>out-of-source</em> builds are preferred.
<em>Out-of-source</em> builds are accomplished by providing a separate, dedicated <strong>BUILD</strong> directory, outside of the source directories.
This provides the user the ability to delete the build tree without deleting source files, keeps the build artifacts generated by CMake out of the <em>source</em> directories, and protects source files from version control tools.</p>
<p>For this example, <strong>BUILD</strong> directories have been created outside of the source directories under <code class="docutils literal notranslate"><span class="pre">path/to/afsim</span></code>:</p>
<table class="colwidths-auto header-text-center class align-top docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Directory Structure from AFSIM Distribution File</p></th>
<th class="head"><p>Directory Structure from AFSIM Download or Clone</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">afsim</span>
           \<span class="o">|</span><span class="n">__</span> <span class="nb">bin</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">demos</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">documentation</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">resources</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">swdev</span>
           \<span class="o">|</span>  \<span class="o">|</span><span class="n">__</span> <span class="o">**</span><span class="n">BUILD</span><span class="o">**</span>
           \<span class="o">|</span>  \<span class="o">|</span><span class="n">__</span> <span class="n">src</span>
           \<span class="o">|</span>      <span class="o">.</span>
           \<span class="o">|</span>      <span class="o">.</span>
           \<span class="o">|</span>      <span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
           \<span class="o">|</span>      <span class="o">.</span>
           \<span class="o">|</span>      <span class="o">.</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">tools</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">training</span>
</pre></div>
</div>
</td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">afsim</span>
           \<span class="o">|</span><span class="n">__</span> <span class="o">.</span><span class="n">gitlab</span>
           \<span class="o">|</span><span class="n">__</span> <span class="o">**</span><span class="n">BUILD</span><span class="o">**</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">cmake</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">core</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">doc</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">mission</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">mystic</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">sensor_plot</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">tools</span>
           \<span class="o">|</span><span class="n">__</span> <span class="n">warlock</span>
           \<span class="o">|</span>   <span class="o">.</span>
           \<span class="o">|</span>   <span class="o">.</span>
           <span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
           <span class="n">CMakeSettings</span><span class="o">.</span><span class="n">json</span>
           <span class="n">LICENSE</span><span class="o">.</span><span class="n">md</span>
           <span class="n">README</span><span class="o">.</span><span class="n">md</span>
           <span class="o">.</span>
           <span class="o">.</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The top level source directories contain the main <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> files.  The <strong>core</strong> directory contains the source code for the simulation framework (WSF) and its extensions. The application directories (<em>mission, mystic, warlock, wizard</em>, etc.) contain the source and test code for the managed applications.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>swdev</em> directory contains the source code filesystem when installing AFSIM from a distribution file.  The <em>bin</em> directory contains the AFSIM application executables and libraries.</p>
</div>
<p>The <em>demos</em> folder contains all the <em>demos</em> and <em>scenarios</em> for the AFSIM applications. The <em>regression_tests</em> sub-directory under <em>demos</em> contains the <code class="docutils literal notranslate"><span class="pre">&lt;application-name&gt;_list.txt</span></code> files that specify the test files for <a class="reference internal" href="#running-the-regression-tests">Running the Regression Tests</a>.</p>
<blockquote>
<div><pre class="literal-block">demos
|__ acoustic
|   .
|   .
|__ regression_tests
|   mission_list.txt
|   sensor_plot_list.txt
|    .
|    .
|__ route_finder_demos
|__ satellite_demos
|   .
|   .</pre>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The regression test suite is not distributed with the AFSIM release and is available only when cloning or downloading the <em>demos</em> repo.</p>
</div>
<p><strong>Unit test</strong> source files (C++) are located in <em>test</em> sub-directories under those modules or libraries that have unit test suites.</p>
<blockquote>
<div><pre class="literal-block">.
.
|__ core
|__ doc
|__ mission
|__ tools
|  |__ geodata
|      |__ test
|        .
|        .
|  |__ util
|      |__ test
|        .
|        .
|__ wizard
|__ wsf_plugins
.
.</pre>
</div></blockquote>
<section id="including-3rd-party-libraries-and-resources">
<h4><a class="toc-backref" href="#id17">Including 3rd Party Libraries and Resources</a><a class="headerlink" href="#including-3rd-party-libraries-and-resources" title="Permalink to this headline">¶</a></h4>
<p>The <em>3rd_party</em> and <em>vtk_resources</em> artifacts may be downloaded from <a class="reference external" href="https://confluence.di2e.net/x/mBqHG">Confluence</a> by navigating to the <strong>Developer Resources</strong> table for the desired release.</p>
<p><em>3rd party libraries</em> and <em>resources</em> may be included in the AFSIM build by extracting the files in the AFSIM root directory (or other directory) and setting the <strong>SWDEV_THIRD_PARTY_PACKAGE_SOURCES</strong> and <strong>VTK_RESOURCES_SOURCEDIR</strong> in the CMake build options to the directory the files were downloaded in.  See <a class="reference internal" href="#configuring-3rd-party-libraries-and-resources">Configuring 3rd party libraries and resources</a> for additional information.</p>
</section>
<section id="including-extensions-and-plug-ins">
<h4><a class="toc-backref" href="#id18">Including Extensions and Plug-ins</a><a class="headerlink" href="#including-extensions-and-plug-ins" title="Permalink to this headline">¶</a></h4>
<p>Extensions (also called optional projects) and plug-ins can be included in the AFSIM build by placing them in the AFSIM root directory (or other directory) and setting the <strong>WSF_ADD_EXTENSION_PATH</strong> in the CMake build options.  Setting the WSF_PLUGIN_BUILD CMake option to TRUE enables plugins in the build executables.  See <a class="reference internal" href="#cmake-options">CMake Options</a> for additional information.</p>
<p>Extensions have a directory that collects all the files and directories that make up the extension. That main directory must contain a <code class="docutils literal notranslate"><span class="pre">wsf_module</span></code> file that CMake will use to include the extension in the AFSIM build.  The <code class="docutils literal notranslate"><span class="pre">wsf_module</span></code> filename has no extension and the file itself has no content.  This file exists with the plugin as an indication to CMake that the directory includes an extension.</p>
<p>It also includes the <code class="docutils literal notranslate"><span class="pre">test_&lt;application-name&gt;</span></code> directory that contains the <code class="docutils literal notranslate"><span class="pre">test_*.txt</span></code> files that will be run along with an application’s auto tests.  See <a class="reference internal" href="#running-the-system-tests">Running the System Tests</a> for additional information.</p>
</section>
</section>
<section id="generating-a-buildsystem">
<h3><a class="toc-backref" href="#id19">Generating a Buildsystem</a><a class="headerlink" href="#generating-a-buildsystem" title="Permalink to this headline">¶</a></h3>
<p>CMake is used to generate the AFSIM buildsystem and provides both a command line and GUI interface for generating the buildsystem. Additional documentation for CMake can be found at <a class="reference external" href="https://cmake.org/documentation/">https://cmake.org/documentation/</a>.</p>
<section id="cmake-command-line">
<h4><a class="toc-backref" href="#id20">CMake Command Line</a><a class="headerlink" href="#cmake-command-line" title="Permalink to this headline">¶</a></h4>
<p>One of the following CMake command signatures may be used to specify the source and build trees and generate a buildsystem:</p>
<p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">[&lt;options&gt;]</span> <span class="pre">&lt;path-to-source&gt;</span></code></p>
<blockquote>
<div><p>Uses the current working directory as the build tree, and <code class="docutils literal notranslate"><span class="pre">&lt;path-to-source&gt;</span></code> as the source tree containing the top-level AFSIM <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file. The specified path may be absolute or relative to the current working directory. See examples below:</p>
</div></blockquote>
<table class="colwidths-auto header-text-center class align-top docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>CMake Command Line Using Path to “Source”</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><table class="colwidths-auto cell-text-left class align-top docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>AFSIM Distribution File</strong></p></td>
<td><p><strong>AFSIM Download or Clone</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim&gt;</span> <span class="pre">cd</span> <span class="pre">BUILD</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/swdev/BUILD&gt;</span> <span class="pre">cmake</span> <span class="pre">../src</span></code></p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim&gt;</span> <span class="pre">cd</span> <span class="pre">BUILD</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/BUILD&gt;</span> <span class="pre">cmake</span> <span class="pre">..</span></code></p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">[&lt;options&gt;]</span> <span class="pre">&lt;path-to-existing-build&gt;</span></code></p>
<blockquote>
<div><p>Uses <code class="docutils literal notranslate"><span class="pre">&lt;path-to-existing-build&gt;</span></code> as the build tree, and loads the path to the source tree from its <code class="docutils literal notranslate"><span class="pre">CMakeCache.txt</span></code> file (which must have been generated by a previous run of CMake). The specified path may be absolute or relative to the current working directory. For example:</p>
</div></blockquote>
<table class="colwidths-auto header-text-center class align-top docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>CMake Command Line Using Path to “BUILD”</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><table class="colwidths-auto cell-text-left class align-top docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>AFSIM Distribution File</strong></p></td>
<td><p><strong>AFSIM Download or Clone</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/swdev&gt;</span> <span class="pre">cd</span> <span class="pre">BUILD</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/swdev/BUILD&gt;</span> <span class="pre">cmake</span> <span class="pre">.</span></code></p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim&gt;</span> <span class="pre">cd</span> <span class="pre">BUILD</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/BUILD&gt;</span> <span class="pre">cmake</span> <span class="pre">.</span></code></p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">[&lt;options&gt;]</span> <span class="pre">-S</span> <span class="pre">&lt;path-to-source&gt;</span> <span class="pre">-B</span> <span class="pre">&lt;path-to-build&gt;</span></code></p>
<blockquote>
<div><p>Uses <code class="docutils literal notranslate"><span class="pre">&lt;path-to-source&gt;</span></code> as the source tree and <code class="docutils literal notranslate"><span class="pre">&lt;path-to-build&gt;</span></code> as the build tree, containing the top-level AFSIM <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file. The specified paths may be absolute or relative to the current working directory. The build tree will be created automatically if it does not already exist. For example:</p>
</div></blockquote>
<table class="colwidths-auto header-text-center class align-top docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>CMake Command Line Using Paths to “Source” and “BUILD”</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><table class="colwidths-auto cell-text-left class align-top docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>AFSIM Distribution File</strong></p></td>
<td><p><strong>AFSIM Download or Clone</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim/swdev&gt;</span> <span class="pre">cmake</span> <span class="pre">-S</span> <span class="pre">./src</span> <span class="pre">-B</span> <span class="pre">./BUILD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">path/to/afsim&gt;</span> <span class="pre">cmake</span> <span class="pre">-S</span> <span class="pre">.</span> <span class="pre">-B</span> <span class="pre">./BUILD</span></code></p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#cmake-options">CMake Options</a> for a list of commonly used options.</p>
</div>
</section>
<section id="cmake-gui">
<h4><a class="toc-backref" href="#id21">CMake GUI</a><a class="headerlink" href="#cmake-gui" title="Permalink to this headline">¶</a></h4>
<p>Launch the cmake-gui application (or cmake3-gui on Linux which supports the same <a class="reference internal" href="#cmake-command-line">command line interface</a> as <code class="docutils literal notranslate"><span class="pre">cmake</span></code>) to specify paths to source and build directories. If no arguments are given, these paths may be specified using the following steps:</p>
<ol class="arabic">
<li><p>In the <strong>Where is the source code:</strong> field, enter the path to the source tree containing the top-level AFSIM <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;path/to/afsim&gt;/swdev/src</span></code>. On supported windowing systems, you may also drag and drop the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file into the CMake GUI.</p></li>
<li><p>In the <strong>Where to build the binaries:</strong> field, enter the path to the build directory, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;path/to/afsim&gt;/swdev/BUILD</span></code>. You will be prompted to create this directory if it does not already exist. On supported windowing systems, you may also drag and drop a previously generated <code class="docutils literal notranslate"><span class="pre">CMakeCache.txt</span></code> file from an existing build into the CMake GUI.</p></li>
<li><p>Make changes as necessary to the configuration <a class="reference internal" href="#cmake-options">options</a> and then select the <em>Configure</em> button.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this is a new build (i.e. no CMake cache), you will have to specify the <em>generator</em> for the project (e.g. Visual Studio), and <em>optional platform for generator</em> (e.g. x64).</p>
</div>
</li>
<li><p>Once the Configure step is complete, select the <em>Generate</em> button to generate the buildsystem.</p></li>
<li><p>If using an IDE generator, such as Visual Studio, you may select the <em>Open Project</em> button to open the project file.</p></li>
</ol>
</section>
<section id="cmake-options">
<h4><a class="toc-backref" href="#id22">CMake Options</a><a class="headerlink" href="#cmake-options" title="Permalink to this headline">¶</a></h4>
<p>Options can be set in the CMake GUI or passed as command line arguments using <code class="docutils literal notranslate"><span class="pre">-D&lt;var&gt;[:&lt;type&gt;]=&lt;value&gt;</span></code>. The following variables are the most commonly used in modifying configurations:</p>
<blockquote>
<div><dl>
<dt><strong>BUILD_WITH_&lt;module&gt;</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables each optional module (library extension or application).</p>
</dd>
<dt><strong>BUILD_MYSTIC_PLUGIN_&lt;PluginName&gt;</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables each Mystic plugin.</p>
</dd>
<dt><strong>BUILD_WARLOCK_PLUGIN_&lt;PluginName&gt;</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables each Warlock plugin.</p>
</dd>
<dt><strong>BUILD_WIZARD_PLUGIN_&lt;PluginName&gt;</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables each Wizard plugin.</p>
</dd>
<dt><strong>BUILD_WKF_PLUGIN_&lt;PluginName&gt;</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables each WKF plugin, which is loaded by multiple GUI applications.</p>
</dd>
<dt><strong>CMAKE_BUILD_TYPE</strong><span class="classifier">STRING</span></dt><dd><p>Specifies the build type on single-configuration generators, such as Makefile Generators and Ninja, as opposed to multi-configuration generators, such as Microsoft Visual Studio. Possible values include <code class="docutils literal notranslate"><span class="pre">Debug</span></code> and <code class="docutils literal notranslate"><span class="pre">Release</span></code> (default).</p>
</dd>
<dt><strong>CMAKE_INSTALL_PREFIX</strong><span class="classifier">PATH</span></dt><dd><p>Specifies the install directory when <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> is invoked or the <code class="docutils literal notranslate"><span class="pre">INSTALL</span></code> target is built. Default is <code class="docutils literal notranslate"><span class="pre">${CMAKE_BINARY_DIR}/wsf_install</span></code>.</p>
</dd>
<dt><strong>CMAKE_UNITY_BUILD</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_UNITY_BUILD.html">CMake unity build</a> support (available in CMake 3.16 and later).
This feature “enables batch compilation of multiple sources within each target”, resulting in significantly improved build times.
Exact results will vary based on CPU, I/O subsystem, operating system, and compiler.
Observed results with AFSIM generally show wall clock time improvements of at least 3x for clean builds.</p>
</dd>
<dt><strong>PROMOTE_HARDWARE_EXCEPTIONS</strong><span class="classifier">BOOL (Advanced)</span></dt><dd><p>When set, <code class="docutils literal notranslate"><span class="pre">ut::PromoteHardwareExceptions(true)</span></code> allows hardware exceptions, such as divide-by-zero and access-violation to be promoted to <code class="docutils literal notranslate"><span class="pre">ut::HardwareException</span></code>.
On Windows, the function must be called on each thread individually.
When the CMake flag is not set, the function is still callable but does nothing.</p>
<p>Marked as <em>advanced</em> and will only be seen in the CMake GUI if the “Advanced” box is checked.</p>
</dd>
</dl>
<dl class="simple" id="wsf-add-extension-path">
<dt><strong>WSF_ADD_EXTENSION_PATH</strong><span class="classifier">PATH</span></dt><dd><p>Define additional search paths for extensions and plugins. Multiple paths may be specified with a <code class="docutils literal notranslate"><span class="pre">;</span></code>-separated list.</p>
</dd>
<dt><strong>WSF_PLUGIN_BUILD</strong><span class="classifier">BOOL</span></dt><dd><p>Builds shared object or DLL libraries instead of static libraries and enables plugins in the resulting executables. Default is TRUE.</p>
</dd>
<dt><strong>WSF_INSTALL_SOURCE</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of source files. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_DOXYGEN</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of Doxygen directory and sub-directories, if DOXYGEN target was built. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_DOCUMENTATION</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of documentation directory and sub-directories, if DOCUMENTATION target was built. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_DEMOS</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of demos directory and sub-directories. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_SCENARIOS</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of scenarios directory and sub-directories. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_TOOLS</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of tools directory and sub-directories. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_TRAINING</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of training directory and sub-directories. Default is FALSE.</p>
</dd>
<dt><strong>WSF_INSTALL_DEPENDENCIES</strong><span class="classifier">BOOL</span></dt><dd><p>Enables or disables the installation of dependencies, e.g. MSVC runtimes, MESA GL libraries, etc. Default is FALSE.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="configuring-3rd-party-libraries-and-resources">
<h4><a class="toc-backref" href="#id23">Configuring 3rd party libraries and resources</a><a class="headerlink" href="#configuring-3rd-party-libraries-and-resources" title="Permalink to this headline">¶</a></h4>
<p>Several options are available for configuring the 3rd party and resource dependencies. These dependencies are required for creating unit test targets using GTest, and for building the GUI applications. In the default configuration, CMake will look for 3rd party packages in <code class="docutils literal notranslate"><span class="pre">${CMAKE_SOURCE_DIR}/../dependencies/3rd_party</span></code> and the resources archive in <code class="docutils literal notranslate"><span class="pre">${CMAKE_SOURCE_DIR}/../dependencies/resources</span></code>.</p>
<blockquote>
<div><dl class="simple">
<dt><strong>SWDEV_THIRD_PARTY_ROOT</strong><span class="classifier">PATH</span></dt><dd><p>The directory into which 3rd party packages will be extracted, or existing directory containing unpacked libraries. If not specified, CMake will attempt to detect an existing 3rd_party directory defined by the environment variable <code class="docutils literal notranslate"><span class="pre">SWDEV_THIRD_PARTY_PATH</span></code>, or contained within or parallel to the source tree. If a 3rd_party directory is not detected in any of these locations, one will be created in the default location <code class="docutils literal notranslate"><span class="pre">${CMAKE_BINARY_DIR}/3rd_party</span></code>.</p>
</dd>
<dt><strong>SWDEV_THIRD_PARTY_PACKAGE_SOURCES</strong><span class="classifier">PATH</span></dt><dd><p>The source directory containing the 3rd party packages in tar.gz, tar, or zip format. Multiple search paths may be specified in a <code class="docutils literal notranslate"><span class="pre">;</span></code>-separated list. If not specified, the default location is <code class="docutils literal notranslate"><span class="pre">${CMAKE_SOURCE_DIR}/../dependencies/3rd_party</span></code>.</p>
</dd>
<dt><strong>VTK_DEV_RESOURCES_PATH</strong><span class="classifier">PATH</span></dt><dd><p>The directory into which the resources archive will be extracted, or existing directory containing unpacked resource contents. Default location is <code class="docutils literal notranslate"><span class="pre">${CMAKE_SOURCE_DIR}/../resources</span></code>.</p>
</dd>
<dt><strong>VTK_RESOURCES_SOURCEDIR</strong><span class="classifier">PATH</span></dt><dd><p>The source directory containing the resources archive or externally managed unpacked resources. If not specified, the default location is <code class="docutils literal notranslate"><span class="pre">${CMAKE_SOURCE_DIR}/../dependencies/resources</span></code>, unless <strong>VTK_RESOURCES_SEARCH_PATH</strong> is defined.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following variables are marked as <em>advanced</em> and will only be seen in the CMake GUI if the “Advanced” box is checked.</p>
</div>
<dl class="simple">
<dt><strong>VTK_RESOURCES_SEARCH_PATH</strong><span class="classifier">PATH (Advanced)</span></dt><dd><p>As an alternative to <strong>VTK_RESOURCES_SOURCEDIR</strong>, define an initial search path for resources in a <code class="docutils literal notranslate"><span class="pre">;</span></code>-separated list. Provides a hook for a developer or build system to specify alternate layouts without requiring source modification. The first valid directory discovered will be set as <strong>VTK_RESOURCES_SOURCEDIR</strong> (and cached for subsequent executions).</p>
</dd>
<dt><strong>VTK_RESOURCES_ARCHIVE_FILENAME</strong><span class="classifier">STRING (Advanced)</span></dt><dd><p>The file name of the resources archive to extract. Default is <code class="docutils literal notranslate"><span class="pre">vtk_resources-&lt;version&gt;-noarch.tar.gz</span></code>.</p>
</dd>
<dt><strong>VTK_RESOURCES_CONTINUEIFMISSING</strong><span class="classifier">BOOL (Advanced)</span></dt><dd><p>Specifies whether CMake should warn and continue generating if required resources are not found. If false (the default), an error is produced, which will continue processing but skip generation.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>
</section>
<section id="building-the-standard-afsim-applications">
<h2><a class="toc-backref" href="#id24">Building the Standard AFSIM applications</a><a class="headerlink" href="#building-the-standard-afsim-applications" title="Permalink to this headline">¶</a></h2>
<p>To build one or more of the standard <a class="reference internal" href="../wsf_reference_guide.html#baseline-execs"><span class="std std-ref">applications</span></a> (i.e. <a class="reference internal" href="../mission.html"><span class="doc">mission</span></a>, etc.):</p>
<section id="windows">
<h3><a class="toc-backref" href="#id25">Windows</a><a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<section id="cmake-targets">
<h4><a class="toc-backref" href="#id26">CMake Targets</a><a class="headerlink" href="#cmake-targets" title="Permalink to this headline">¶</a></h4>
<p>CMake generates multiple targets, including one for each executable and library.</p>
<p>The following CMake pre-defined targets are available:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>ALL_BUILD</strong></dt><dd><p>Builds all application(s) and libraries.</p>
</dd>
<dt><strong>INSTALL</strong></dt><dd><p>Generates an installation directory installing all items defined in the <code class="docutils literal notranslate"><span class="pre">CMakelists.txt</span></code> files.  See <a class="reference internal" href="#building-the-install-target">Building the Install Target</a> for additional detail.</p>
</dd>
<dt><strong>INSTALL_RUNTIME_ONLY</strong></dt><dd><p>Generates an installation directory with only the runtime components (e.g. libraries, plugins, executables, grammar).  This may be used to generate the  minimum set of components required to run AFSIM, reducing installation times by not installing documentation, demos, etc.</p>
</dd>
<dt><strong>PACKAGE</strong></dt><dd><p>Creates a package file for distribution using the CPack generator specified in the CMake options: <code class="docutils literal notranslate"><span class="pre">CPACK_BINARY_ZIP</span></code> for a <em>zip</em> file or <code class="docutils literal notranslate"><span class="pre">CPACK_BINARY_WIX</span></code> for <em>msi</em> installer (requires WiX).</p>
</dd>
<dt><strong>RUN_TESTS</strong></dt><dd><p>Run all unit tests defined in the projects. Requires <a class="reference external" href="https://github.com/google/googletest">gtest</a> to be installed.</p>
</dd>
<dt><strong>ZERO_CHECK</strong></dt><dd><p>Automatically generated by CMake for Visual Studio integration, ignore.</p>
</dd>
</dl>
</div></blockquote>
<p>The following custom targets are available:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>&lt;application-name&gt;_AUTO_TEST</strong></dt><dd><p>Run all tests against the &lt;application-name&gt; application.</p>
</dd>
<dt><strong>&lt;application-name&gt;_REGRESSION_TEST</strong></dt><dd><p>Run regression output for demos and scenarios against the &lt;application-name&gt; application.</p>
</dd>
<dt><strong>DOCUMENTATION</strong></dt><dd><p>Generates the documentation inside the <strong>BUILD</strong> directory in a folder called <em>documentation</em> for installation.  See <a class="reference internal" href="#building-the-documentation-target">Building the Documentation Target</a> for additional detail.</p>
</dd>
<dt><strong>DOXYGEN</strong></dt><dd><p>Generates the Doxygen (code) documentation inside the <strong>BUILD</strong> directory in a folder called <em>doxygen</em> for installation.</p>
</dd>
</dl>
</div></blockquote>
<p>Open the <code class="docutils literal notranslate"><span class="pre">afsim.sln</span></code> file from the <strong>BUILD</strong> directory with Visual Studio.</p>
<p>Upon inspection, the generated solution will contain multiple projects, some of which are source groups for multiple projects or type classes of projects. The <strong>applications</strong> source folder in Visual Studio contains all the applications that are being built in the solution.</p>
<dl class="simple">
<dt>Open the ‘Configuration Manager’ (<strong>Build -&gt; Configuration Manager</strong>) or use the <strong>Standard</strong> toolbar (<strong>View -&gt; Toolbars -&gt; Standard</strong>) and select the desired <strong>Active solution configuration</strong>.</dt><dd><ul class="simple">
<li><p>Select <em>INSTALL</em> in the Solution Explorer</p></li>
<li><p>Select <em>Release</em> for Solution Configuration (unless building a debug version)</p></li>
<li><p>Start the build</p></li>
</ul>
</dd>
</dl>
</section>
</section>
<section id="linux">
<h3><a class="toc-backref" href="#id27">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>From the <strong>BUILD</strong> directory run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&lt;</span><span class="n">make</span><span class="o">-</span><span class="n">options</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">make</span><span class="o">-</span><span class="n">targets</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="make-targets">
<h4><a class="toc-backref" href="#id28">Make Targets</a><a class="headerlink" href="#make-targets" title="Permalink to this headline">¶</a></h4>
<p>The following CMake pre-defined targets are available:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>all</strong></dt><dd><p>Builds all application(s) and libraries. This is the default target if none is specified.</p>
</dd>
<dt><strong>install</strong></dt><dd><p>Builds and installs artifacts to <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> (default is <em>BUILD/wsf_install</em>).</p>
</dd>
<dt><strong>clean</strong></dt><dd><p>Removes all created build products (debug and optimized versions of object files, libraries and executables).</p>
</dd>
<dt><strong>package</strong></dt><dd><p>Creates a package file for distribution using the appropriate CPack generator (deb, rpm, or tar.gz)</p>
</dd>
<dt><strong>test</strong></dt><dd><p>Run all unit tests defined in the projects. Requires <a class="reference external" href="https://github.com/google/googletest">gtest</a> to be installed.</p>
</dd>
</dl>
</div></blockquote>
<p>The following custom targets are available:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>&lt;application-name&gt;_AUTO_TEST</strong></dt><dd><p>Run all tests against the &lt;application-name&gt; application.</p>
</dd>
<dt><strong>&lt;application-name&gt;_AUTO_TEST_VALGRIND</strong></dt><dd><p>Run all tests against the &lt;application-name&gt; application using valgrind outputting <em>xml</em> files for parsing.</p>
</dd>
<dt><strong>&lt;application-name&gt;_REGRESSION_TEST</strong></dt><dd><p>Run regression output for demos and scenarios against the &lt;application-name&gt; application.</p>
</dd>
<dt><strong>DOCUMENTATION</strong></dt><dd><p>Generates the documentation inside the <strong>BUILD</strong> directory in a folder called documentation for installation.  See <a class="reference internal" href="#building-the-documentation-target">Building the Documentation Target</a> for additional detail.</p>
</dd>
<dt><strong>DOXYGEN</strong></dt><dd><p>Generates the Doxygen (code) documentation inside the <strong>BUILD</strong> directory in a folder called doxygen for installation.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="make-options">
<h4><a class="toc-backref" href="#id29">Make Options</a><a class="headerlink" href="#make-options" title="Permalink to this headline">¶</a></h4>
<p>&lt;make-options&gt; can be any valid make option, but the following two are of particular interest:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>-j [jobs]</strong></dt><dd><p>Specifies the number of jobs (commands) to run simultaneously. If the ‘-j’ option is given without an argument, make will not limit the number of jobs that can run simultaneously. ‘-j8’ is a good compromise if one does not wish to monopolize the system.</p>
</dd>
<dt><strong>VERBOSE=1</strong></dt><dd><p>CMake hides many of the details when calling the compiler and linker, making it difficult to debug build problems. This command forces all commands run by make to be output to STDOUT.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>
</section>
<section id="building-the-install-target">
<h2><a class="toc-backref" href="#id30">Building the Install Target</a><a class="headerlink" href="#building-the-install-target" title="Permalink to this headline">¶</a></h2>
<p>Users may build with the <strong>INSTALL</strong> target which creates a new <em>install</em> directory at <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> and pulls in all previously built applications, libraries, and plugins into the new directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any documentation artifacts needing to be part of the <em>install</em> must be generated before running the install target.</p>
</div>
<p>For Windows, the <strong>Release</strong> configuration must be selected in the Configuration Manager prior to running the <strong>INSTALL</strong> target.</p>
<p>For Linux, the <strong>CMAKE_BUILD_TYPE</strong> option must be set to <em>Release</em> prior to running the <strong>install</strong> target.</p>
<p>The following is an example of the <em>install</em> directory:</p>
<blockquote>
<div><pre class="literal-block">path/to/afsim/install
           |__ bin
           |  |__ grammar
           |  |__ lib
           |  |__ mission_plugins
           |  .
           |  .
           |  dis.dll
           |  .
           |  .
           |__ resources
           |  |__ data
           |  |__ maps
           |  |__ models
           |  |__ shaders</pre>
</div></blockquote>
</section>
<section id="building-the-documentation-target">
<h2><a class="toc-backref" href="#id31">Building the Documentation Target</a><a class="headerlink" href="#building-the-documentation-target" title="Permalink to this headline">¶</a></h2>
<p>Details for building <strong>Documentation</strong> may be found in <a class="reference internal" href="documentation_generation.html"><span class="doc">Documentation Generation</span></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A <em>full</em> build is not a required prerequisite for building documentation.  Building the <strong>DOCUMENTATION</strong> target is sufficient to generate documentation.</p>
</div>
</section>
<section id="running-the-system-tests">
<h2><a class="toc-backref" href="#id32">Running the System Tests</a><a class="headerlink" href="#running-the-system-tests" title="Permalink to this headline">¶</a></h2>
<p>The system tests ensure that AFSIM (specifically the <em>core</em> application <strong>mission</strong>) is working correctly. AFSIM extensions and plugins can also have tests for their capability by having <code class="docutils literal notranslate"><span class="pre">test_*.txt</span></code> files on the following path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">afsim</span><span class="o">/</span><span class="n">extension_name</span><span class="o">/</span><span class="n">wsf_</span><span class="o">&lt;</span><span class="n">extension_name</span><span class="o">&gt;/</span><span class="n">test_mission</span>
</pre></div>
</div>
<p>The output for a successful test will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">TEST</span><span class="o">-</span> <span class="n">Using</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">&gt;/</span><span class="n">mission_</span><span class="o">&lt;</span><span class="n">suffix</span><span class="o">&gt;.</span><span class="n">exe</span>
<span class="n">Running</span> <span class="c1">### tests</span>
<span class="n">Tests</span> <span class="n">Complete</span> <span class="ow">in</span> <span class="c1">#.# s</span>
<span class="o">---------------------------------------------------</span>
<span class="c1">### tests passed</span>
<span class="o">-</span><span class="n">PASS</span><span class="o">-</span> <span class="n">No</span> <span class="n">errors</span> <span class="n">detected</span>
</pre></div>
</div>
<section id="id3">
<span id="docs/developer/build_instructions:running the system tests:Windows"></span><h3><a class="toc-backref" href="#id33">Windows</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Build the <strong>&lt;application-name&gt;_AUTO_TEST</strong> project from Visual Studio.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>ALL_BUILD</strong> target must be ran prior to target <strong>&lt;application-name&gt;_AUTO_TEST</strong> on plug-in build in order to properly install plug-ins in the proper locations for auto testing.</p>
</div>
</section>
<section id="id4">
<span id="docs/developer/build_instructions:running the system tests:Linux"></span><h3><a class="toc-backref" href="#id34">Linux</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>From the <strong>BUILD</strong> directory run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&lt;</span><span class="n">application</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">_AUTO_TEST</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>make command must be ran prior to make <strong>&lt;application-name&gt;_AUTO_TEST</strong> on plug-in build in order to properly install plug-ins in the proper locations for auto testing.</p>
</div>
</section>
</section>
<section id="running-the-regression-tests">
<h2><a class="toc-backref" href="#id35">Running the Regression Tests</a><a class="headerlink" href="#running-the-regression-tests" title="Permalink to this headline">¶</a></h2>
<p>The regression tests ensure that AFSIM operations (specifically the core applications ‘mission, sensor_plot, etc.’) are working properly with all demos and scenarios as compared to a gold standard output. The demos and scenarios directory structure contains a directory called <code class="docutils literal notranslate"><span class="pre">regression_tests</span></code> with a file called <code class="docutils literal notranslate"><span class="pre">&lt;application-name&gt;_list.txt</span></code>. This file contains the list of demos and scenarios to run against the application and collect output for comparison to gold standard output for that demo or scenario. All test output is placed in the BUILD directory under a folder called regression. This folder contains the demo and scenario output events along with application output listing for comparison to archived gold standard output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">scenarios</span><span class="o">/</span><span class="n">regression_tests</span><span class="o">/&lt;</span><span class="n">application</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">_list</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The output for a successful test will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">REGRESSION</span> <span class="n">TEST</span><span class="o">-</span> <span class="n">Using</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">&gt;/</span><span class="n">mission_</span><span class="o">&lt;</span><span class="n">suffix</span><span class="o">&gt;.</span><span class="n">exe</span>
<span class="n">Running</span> <span class="c1">### tests</span>
<span class="n">Tests</span> <span class="n">Complete</span> <span class="ow">in</span> <span class="c1">#.# s</span>
<span class="o">---------------------------------------------------</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="c1">### tests passed</span>
<span class="o">-</span><span class="n">PASS</span><span class="o">-</span> <span class="n">No</span> <span class="n">errors</span> <span class="n">detected</span>
</pre></div>
</div>
<p>Regression output for each demo or scenario is placed in the following directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">build</span><span class="o">-</span><span class="n">directory</span><span class="o">&gt;/</span><span class="n">regression</span><span class="o">/&lt;</span><span class="n">demo</span><span class="o">/</span><span class="n">scenario</span><span class="o">/</span><span class="n">directory</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="id5">
<span id="docs/developer/build_instructions:running the regression tests:Windows"></span><h3><a class="toc-backref" href="#id36">Windows</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Build the <strong>&lt;application-name&gt;_REGRESSION_TEST</strong> project from Visual Studio.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>ALL_BUILD</strong> target must be built prior to building target: <strong>&lt;application-name&gt;_REGRESSION_TEST</strong> on plug-in build in order properly install plug-ins in the proper locations for regression testing.</p>
</div>
</section>
<section id="id6">
<span id="docs/developer/build_instructions:running the regression tests:Linux"></span><h3><a class="toc-backref" href="#id37">Linux</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>From the <strong>BUILD</strong> directory run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">&lt;</span><span class="n">application</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">_REGRESSION_TEST</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>make</em> command must be ran prior to <em>make</em> <strong>&lt;application-name&gt;_REGRESSION_TEST</strong> on plug-in build in order to properly install plug-ins in the proper locations for regression testing.</p>
</div>
</section>
</section>
</section>
<section id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>The following troubleshooting tips may be used when encountering build problems:</p>
<ol class="arabic simple">
<li><p>Verify the build tools are the correct <em>version</em> according to the <a class="reference internal" href="#prerequisites">Prerequisites</a></p></li>
<li><p>Remove the existing <strong>BUILD</strong> directory and re-build the AFSIM target.</p></li>
<li><p>Ensure the build environment has the correct paths or remote address for 3rd_party libraries and resources.</p></li>
<li><p>Build with the <em>Install</em> target when built applications do not run due to missing libraries. Typically this happens when applications have been compiled but not installed.</p></li>
</ol>
</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    <p class="logo"><a href="../main_page.html">
      <img class="logo" src="../../_static/sidebar_logo.png" alt="Logo"/>
    </a></p>
  

<script src="../../_static/extension.js"></script>
<p>
   <ul class="Core-menu">
      <li><a href="../main_page.html">Main Page</a></li>
      <li><a href="../changelog/afsim_2.9.html">Changelog</a> | <a href="../afsim_change_log.html">History</a></li>
      <li><a href="../documents.html">Documents</a></li>
      <li><a href="../security_info.html">Security Information</a></li>
      <li><a href="../contact_info.html">Contact Information</a></li>
   </ul>
</p>

<br>
<hr>
<br>

<p>
   <h3>Core Apps</h3>
   <ul class="Core-menu">
     <li><a href="../wsf_core.html">Main Page</a></li>
     <li><a href="../wsf_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wsf_2.9.html">Changelog</a> | <a href="../wsf_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Demos</h3>
   <ul class="DEMOS-menu">
     <li><a href="../changelog/demos_2.9.html">Changelog</a> | <a href="../demos_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Mystic</h3>
   <ul class="Mystic-menu">
     <li><a href="../mystic.html">Main Page</a></li>
     <li><a href="../mystic_users_guide.html">User's Guide</a></li>
     <li><a href="../mystic_reference_guide.html">Reference Guide</a></li>
     <li><a href="../pymystic.html">Batch Processing</a></li>
     <li><a href="../changelog/mystic_2.9.html">Changelog</a> | <a href="../mystic_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Warlock</h3>
   <ul class="WARLOCK-menu">
     <li><a href="../warlock.html">Main Page</a></li>
     <li><a href="../warlock_users_guide.html">User's Guide</a></li>
     <li><a href="../warlock_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/warlock_2.9.html">Changelog</a> | <a href="../warlock_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Wizard</h3>
   <ul class="WIZARD-menu">
     <li><a href="../wizard.html">Main Page</a></li>
     <li><a href="../wizard_users_guide.html">User's Guide</a></li>
     <li><a href="../wizard_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wizard_2.9.html">Changelog</a> | <a href="../wizard_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>EVT Reader</h3>
   <ul class="EvtReader-menu">
     <li><a href="../evtreader.html">Main Page</a></li>
   </ul>
</p>

<p>
   <h3>Mover Creator</h3>
   <ul class="MoverCreator-menu">
     <li><a href="../mover_creator.html">Main Page</a></li>
     <li><a href="../mc_users_guide.html">User's Guide</a></li>
     <li><a href="../mc_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/mover_creator_2.9.html">Changelog</a> | <a href="../mc_change_log.html">History</a></li>
   </ul>
</p>

<br>
<hr>
<br>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/docs/developer/build_instructions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="coding_standards.html" title="Coding Standards"
             >next</a> |</li>
        <li class="right" >
          <a href="afsim_sphinx_extensions.html" title="AFSIM Sphinx Extensions"
             >previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Multiple, All Rights Reserved.
      Last updated on Feb 25, 2022.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>