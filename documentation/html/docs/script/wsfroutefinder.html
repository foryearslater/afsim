
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>WsfRouteFinder &#8212; AFSIM 2.9.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/wsftheme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/collapse.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/admonition.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-header.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pseudo-topic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/quick-search.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/collapse_sections.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="WsfRouteNetwork" href="wsfroutenetwork.html" />
    <link rel="prev" title="WsfRoute" href="wsfroute.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="wsfroutenetwork.html" title="WsfRouteNetwork"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="wsfroute.html" title="WsfRoute"
             accesskey="P">previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="wsfroutefinder">
<h1>WsfRouteFinder<a class="headerlink" href="#wsfroutefinder" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt>
WsfRouteFinder  inherits <a class="reference internal" href="wsfobject.html#WsfObject" title="WsfObject">WsfObject</a><p><div class="line"><strong> Construction: </strong><code class="docutils literal notranslate"><span class="pre">WsfRouteFinder</span> <span class="pre">newObj</span> <span class="pre">=</span> <span class="pre">WsfRouteFinder();</span></code></div>
</p>
</dt>
<dd></dd></dl>

<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="WsfRouteFinder.Avoid">
void Avoid<span class="sig-paren">(</span><em class="sig-param"><a class="reference internal" href="wsfplatform.html#WsfPlatform" title="WsfPlatform">WsfPlatform</a> aPlatform</em>, <em class="sig-param">double aRadius</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.Avoid" title="Permalink to this definition">¶</a></dt>
<dt id="WsfRouteFinder.Avoid">
void Avoid<span class="sig-paren">(</span><em class="sig-param"><a class="reference internal" href="wsfgeopoint.html#WsfGeoPoint" title="WsfGeoPoint">WsfGeoPoint</a> aPoint</em>, <em class="sig-param">double aRadius</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.Avoid" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the route finder to avoid particular locations or platforms by a certain radius distance (meters).</p>
</dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.ClearAvoidances">
void ClearAvoidances<span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.ClearAvoidances" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all previously defined avoid commands from the route finder.</p>
</dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.Route">
<a class="reference internal" href="wsfroute.html#WsfRoute" title="WsfRoute">WsfRoute</a> Route<span class="sig-paren">(</span><em class="sig-param">double aTime</em>, <em class="sig-param"><a class="reference internal" href="wsfgeopoint.html#WsfGeoPoint" title="WsfGeoPoint">WsfGeoPoint</a> aStart</em>, <em class="sig-param"><a class="reference internal" href="wsfgeopoint.html#WsfGeoPoint" title="WsfGeoPoint">WsfGeoPoint</a> aEnd</em>, <em class="sig-param">double speed</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.Route" title="Permalink to this definition">¶</a></dt>
<dt id="WsfRouteFinder.Route">
<a class="reference internal" href="wsfroute.html#WsfRoute" title="WsfRoute">WsfRoute</a> Route<span class="sig-paren">(</span><em class="sig-param">double aTime</em>, <em class="sig-param"><a class="reference internal" href="wsfgeopoint.html#WsfGeoPoint" title="WsfGeoPoint">WsfGeoPoint</a> aStart</em>, <em class="sig-param"><a class="reference internal" href="wsfgeopoint.html#WsfGeoPoint" title="WsfGeoPoint">WsfGeoPoint</a> aEnd</em>, <em class="sig-param">double speed</em>, <em class="sig-param">int aIndex</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.Route" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the best (shortest) route around all avoidance areas and returns it.  Radial accelerations for turns are
determined by the computed turn arc and the given speed.  If either the starting or ending locations are contained
within an avoidance region, then those regions are shrunk to accommodate.  If the route is impossible (start and end
are cut off from each other or surrounded) then the route returned will be empty.</p>
<p>If an index, 5th argument, is provided then the route at that index is given if it exists.  The route at index zero is
given by default, it represents the shortest available route.  Index one will be the next shortest route that doesn’t
share the same first leg as the shortest, so for example if the best route went left around an avoidance then the route
at index one might be the route that goes right around said avoidance. This version of the method is simply to give
users other route options in case they don’t like the shortest.</p>
</dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.DrawRoute">
void DrawRoute<span class="sig-paren">(</span><em class="sig-param">double aDuration</em>, <em class="sig-param"><a class="reference internal" href="vec3.html#Vec3" title="Vec3">Vec3</a> aColor</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.DrawRoute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.DrawGraph">
void DrawGraph<span class="sig-paren">(</span><em class="sig-param">double aDuration</em>, <em class="sig-param"><a class="reference internal" href="vec3.html#Vec3" title="Vec3">Vec3</a> aColor</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.DrawGraph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.DrawAvoidances">
void DrawAvoidances<span class="sig-paren">(</span><em class="sig-param">double aDuration</em>, <em class="sig-param"><a class="reference internal" href="vec3.html#Vec3" title="Vec3">Vec3</a> aColor</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.DrawAvoidances" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a datum of the route finder using the given color lasting for the given duration.  DrawRoute simply draws the last
computed route.  DrawGraph will show all possible routes around the avoidance regions.  DrawAvoidances will display all
circular avoidance regions.</p>
</dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.ImpossibleRouteResponse">
<a class="reference internal" href="string.html#string" title="string">string</a> ImpossibleRouteResponse<span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.ImpossibleRouteResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.SetImpossibleRouteResponse">
void SetImpossibleRouteResponse<span class="sig-paren">(</span><em class="sig-param"><a class="reference internal" href="string.html#string" title="string">string</a> aResponse</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.SetImpossibleRouteResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns or sets the identifier for how the route finder handles impossible routes.  Impossible routes would be the case
where either the start or end point exist inside of an avoidance or when either point is completely surrounded by
avoidance areas.  All three methods are implemented and have passed initial testing.</p>
<ul class="simple">
<li><p>“SHRINK” = method shrinks the offending avoidance areas, and only those, until a route is possible.</p></li>
<li><p>“SHIFT”  = this method moves the offending point (starting and/or target point) outside of all avoidance regions so that it is reachable.</p></li>
<li><p>“IGNORE” = this method simply ignores the offending avoidance areas as if they were not even there.</p></li>
</ul>
<p>Default: “SHRINK”</p>
</dd></dl>

<dl class="method">
<dt id="WsfRouteFinder.SetMaxArcLength">
void SetMaxArcLength<span class="sig-paren">(</span><em class="sig-param">double aMaxArcLength</em><span class="sig-paren">)</span><a class="headerlink" href="#WsfRouteFinder.SetMaxArcLength" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum allowable distance between way-points of the returned route that exist on an arc.  This is useful for
splitting up a route that does a slow “bank” around a very large avoidance region.  Some movers aren’t setup well to
handle way-point routes that are limited by radial acceleration.  A reasonable value might be 5556 (3 nm in meters).</p>
<p>Default: ~infinity</p>
</dd></dl>

</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>This example has “player-1” use a WsfRouteFinder to route to the “target” platform while avoiding two static regions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span> <span class="n">target</span> <span class="n">WSF_PLATFORM</span>
  <span class="n">icon</span> <span class="n">bullseye</span>
  <span class="n">position</span> <span class="mf">00.32075</span><span class="n">n</span> <span class="mf">01.51704</span><span class="n">e</span> <span class="n">altitude</span> <span class="mi">10000</span> <span class="n">ft</span> <span class="n">msl</span>
<span class="n">end_platform</span>

<span class="n">platform</span> <span class="n">player</span><span class="o">-</span><span class="mi">1</span> <span class="n">WSF_PLATFORM</span>
   <span class="n">side</span> <span class="n">blue</span>
   <span class="n">icon</span> <span class="mi">737</span>
   <span class="n">add</span> <span class="n">mover</span> <span class="n">WSF_AIR_MOVER</span> <span class="n">update_interval</span> <span class="mi">1</span> <span class="n">sec</span> <span class="n">end_mover</span>
   <span class="n">route</span> <span class="n">position</span> <span class="mf">00.32462</span><span class="n">n</span> <span class="mf">03.86294</span><span class="n">e</span> <span class="n">altitude</span> <span class="mi">10000</span> <span class="n">ft</span> <span class="n">msl</span> <span class="n">speed</span> <span class="mi">250</span> <span class="n">m</span><span class="o">/</span><span class="n">s</span> <span class="n">end_route</span>
   <span class="n">on_initialize2</span>
         <span class="n">WsfGeoPoint</span> <span class="n">src</span> <span class="o">=</span> <span class="n">PLATFORM</span><span class="o">.</span><span class="n">Location</span><span class="p">();</span>
         <span class="n">WsfGeoPoint</span> <span class="n">tgt</span> <span class="o">=</span> <span class="n">WsfSimulation</span><span class="o">.</span><span class="n">FindPlatform</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">Location</span><span class="p">();</span>
         <span class="n">WsfRouteFinder</span> <span class="n">finder</span> <span class="o">=</span> <span class="n">WsfRouteFinder</span><span class="p">();</span>
         <span class="n">finder</span><span class="o">.</span><span class="n">Avoid</span><span class="p">(</span><span class="n">WsfGeoPoint</span><span class="o">.</span><span class="n">Construct</span><span class="p">(</span><span class="mf">0.51556</span><span class="p">,</span> <span class="mf">2.35111</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1852</span><span class="o">*</span><span class="mi">20</span><span class="p">);</span>
         <span class="n">finder</span><span class="o">.</span><span class="n">Avoid</span><span class="p">(</span><span class="n">WsfGeoPoint</span><span class="o">.</span><span class="n">Construct</span><span class="p">(</span><span class="mf">0.18667</span><span class="p">,</span> <span class="mf">3.27111</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1852</span><span class="o">*</span><span class="mi">20</span><span class="p">);</span>
         <span class="n">WsfRoute</span> <span class="n">path</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">Route</span><span class="p">(</span><span class="n">TIME_NOW</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">tgt</span><span class="p">,</span> <span class="mi">250</span><span class="p">);</span> <span class="o">//</span><span class="mi">250</span> <span class="n">met</span><span class="o">/</span><span class="n">sec</span> <span class="o">~</span><span class="mi">500</span> <span class="n">knots</span>
         <span class="n">PLATFORM</span><span class="o">.</span><span class="n">SetRoute</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
         <span class="n">finder</span><span class="o">.</span><span class="n">DrawAvoidances</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="n">Vec3</span><span class="o">.</span><span class="n">Construct</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">));</span> <span class="c1"># 20 minute duration, gray color</span>
         <span class="n">finder</span><span class="o">.</span><span class="n">DrawRoute</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="n">Vec3</span><span class="o">.</span><span class="n">Construct</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>     <span class="c1"># 30 second duration, green color</span>
   <span class="n">end_on_initialize2</span>
<span class="n">end_platform</span>
</pre></div>
</div>
<p>Visualization of the example script given here, just a few seconds into the run, showing the calculated route with
green lines.  The debug drawing methods do not worry about “cutting corners” through circles, but the route won’t
actually send the player through the circle.</p>
<img alt="../../_images/route_generated.png" src="../../_images/route_generated.png" />
<p>Visualization of the example script given above, notice the platform rounds the avoidance regions properly.</p>
<img alt="../../_images/route_flown.png" src="../../_images/route_flown.png" />
<p>The WsfRouteFinder works for a general case too, with overlapping zones, and even “mazes” of zones.</p>
<img alt="../../_images/route2_flown.png" src="../../_images/route2_flown.png" />
</section>
</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    <p class="logo"><a href="../main_page.html">
      <img class="logo" src="../../_static/sidebar_logo.png" alt="Logo"/>
    </a></p>
  

<script src="../../_static/extension.js"></script>
<p>
   <ul class="Core-menu">
      <li><a href="../main_page.html">Main Page</a></li>
      <li><a href="../changelog/afsim_2.9.html">Changelog</a> | <a href="../afsim_change_log.html">History</a></li>
      <li><a href="../documents.html">Documents</a></li>
      <li><a href="../security_info.html">Security Information</a></li>
      <li><a href="../contact_info.html">Contact Information</a></li>
   </ul>
</p>

<br>
<hr>
<br>

<p>
   <h3>Core Apps</h3>
   <ul class="Core-menu">
     <li><a href="../wsf_core.html">Main Page</a></li>
     <li><a href="../wsf_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wsf_2.9.html">Changelog</a> | <a href="../wsf_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Demos</h3>
   <ul class="DEMOS-menu">
     <li><a href="../changelog/demos_2.9.html">Changelog</a> | <a href="../demos_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Mystic</h3>
   <ul class="Mystic-menu">
     <li><a href="../mystic.html">Main Page</a></li>
     <li><a href="../mystic_users_guide.html">User's Guide</a></li>
     <li><a href="../mystic_reference_guide.html">Reference Guide</a></li>
     <li><a href="../pymystic.html">Batch Processing</a></li>
     <li><a href="../changelog/mystic_2.9.html">Changelog</a> | <a href="../mystic_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Warlock</h3>
   <ul class="WARLOCK-menu">
     <li><a href="../warlock.html">Main Page</a></li>
     <li><a href="../warlock_users_guide.html">User's Guide</a></li>
     <li><a href="../warlock_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/warlock_2.9.html">Changelog</a> | <a href="../warlock_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>Wizard</h3>
   <ul class="WIZARD-menu">
     <li><a href="../wizard.html">Main Page</a></li>
     <li><a href="../wizard_users_guide.html">User's Guide</a></li>
     <li><a href="../wizard_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/wizard_2.9.html">Changelog</a> | <a href="../wizard_change_log.html">History</a></li>
   </ul>
</p>

<p>
   <h3>EVT Reader</h3>
   <ul class="EvtReader-menu">
     <li><a href="../evtreader.html">Main Page</a></li>
   </ul>
</p>

<p>
   <h3>Mover Creator</h3>
   <ul class="MoverCreator-menu">
     <li><a href="../mover_creator.html">Main Page</a></li>
     <li><a href="../mc_users_guide.html">User's Guide</a></li>
     <li><a href="../mc_reference_guide.html">Reference Guide</a></li>
     <li><a href="../changelog/mover_creator_2.9.html">Changelog</a> | <a href="../mc_change_log.html">History</a></li>
   </ul>
</p>

<br>
<hr>
<br>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/docs/script/wsfroutefinder.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../../wsf-classindex.html" title="Script Class Index"
             >classes</a> |</li>
        <li class="right" >
          <a href="../../wsf-commandindex.html" title="Command Index"
             >commands</a> |</li>
        <li class="right" >
          <a href="../../wsf-modelindex.html" title="Model Index"
             >models</a> |</li>
        <li class="right" >
          <a href="../../wsf-demoindex.html" title="Demo Index"
             >demos</a> |</li>
        <li class="right" >
          <a href="wsfroutenetwork.html" title="WsfRouteNetwork"
             >next</a> |</li>
        <li class="right" >
          <a href="wsfroute.html" title="WsfRoute"
             >previous</a> |</li>
  <li>
    <img src="../../_static/relbar_logo.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="../main_page.html">AFSIM 2.9.0 Documentation</a> &#187;
  </li>
  
        <li class="nav-item nav-item-0"><a href="../../site_index.html">Site Index</a> &#187;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Multiple, All Rights Reserved.
      Last updated on Feb 25, 2022.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>